<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Скидки</title>
    <link href="styles.css" rel="stylesheet" type="text/css">
</head>
<body>
    <table width="100%" align="center" class="header">
        <tr>
            <td width="15%" align="left">
                <a href="index.html">
                    <img src="source/logo.png" alt="Логотип" class="logo">
                </a>
            </td>
            <td align="center">
                <h1 style="margin-top:35px" class="site-title">Фаренгейт</h1>
                <p style="margin-bottom:15px; color:white; font-size: large;">Лучший магазин сантехники!</p>
            </td>
            <td width="21.5%" align="right">
                <div class="login-block">
                    <table width="100%">
                        <tr>
                            <td align="right">
                                <input type="text" id="loginEmail" placeholder="логин" size="15" class="input-field">
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <input type="password" id="loginPassword" placeholder="пароль" size="15" class="input-field">
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <input type="submit" value="вход" class="submit-button" onclick="loginUser()">
                                <a href="authorize.html" class="register-link">регистрация</a>
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
    </table>
    

    <table border="0" width="100%" cellpadding="2" class="nav-table">
        <tr style="text-align: center;">
            <td align="center" width="25%">
                <a href="chapters/chapter1.html" class="nav-button" style="display: inline-block; width: 95%; text-align: center; padding: 8px; border-radius: 15px;">
                    Радиаторы отопления
                </a>
            </td>
            <td align="center" width="25%">
                <a href="chapters/chapter2.html" class="nav-button" style="display: inline-block; width: 95%; text-align: center;  padding: 8px; border-radius: 15px;">
                    Насосное оборудование
                </a>
            </td>
            <td align="center" width="25%">
                <a href="chapters/chapter3.html" class="nav-button" style="display: inline-block; width: 95%; text-align: center;  padding: 8px; border-radius: 15px;">
                    Водонагреватели
                </a>
            </td>
            <td align="center" width="25%">
                <a href="chapters/chapter4.html" class="nav-button" style="display: inline-block; width: 95%; text-align: center; padding: 8px; border-radius: 15px;">
                    Камины
                </a>
            </td>
        </tr>
    </table>
<div id="mainContent">
    <table border="0" width="100%" cellpadding="25" align="center">
        <tr>
            
            <td width="11%" class="sidebar" valign="top" align="center">
                <ul class="nav-list">
                    <li class = "nav-button" style="width:75%"><a href="sales.html" class="nav-button">Скидки</a></li>
                    <li class = "nav-button" style="width:75%"><a href="geo.html" class="nav-button">Контакты</a></li>
                    <li class = "nav-button" style="width:75%"><a href="guarantee.html" class="nav-button">Гарантии</a></li>
                    <li class = "nav-button" style="width:75%"><a href="about_us.html" class="nav-button">О нас</a></li>
                </ul>
            </td>
    <!--Основной контент-->
            <td width="34%" valign="top">
                <h1 align="center">Добро пожаловать</h1>

                <div class="welcome-container">
    
                <p>Здесь представлены товары со скидкой до 50%! Не упустите возможность приобрести качественную продукцию по сниженным ценам.</p>
    
                </div>
    
                <table border="0" width="100%" cellspacing="0" cellpadding="0">
                    <tr>
                        <td align="center" style="border: 10px double gainsboro; padding: 10px; background-color: white;">
                            <a href="https://farengeit-online.ru/catalog/kotelnoe-oborudovanie/" target="_blank">
                            <img src="source/sales 1.jpg" style="width: 75%; height: 155px; max-width: 500px;" alt="Скидка на товар 1"/></a>
                            <strong style="display: block; margin-top: 10px;">Товар со скидкой!</strong>
                            <p>Успей купить!.</p>
                        </td>
                        <td align="center" style="border: 10px double gainsboro; padding: 20px; background-color: white;">
                            <a href="https://farengeit-online.ru/catalog/kotelnoe-oborudovanie/" target="_blank">
                            <img src="source/sales2.jpg" style="width: 75%; height: 100%; max-width: 450px;" alt="Скидка на товар 2"/></a>
                            <strong style="display: block; margin-top: 10px;">Товар со скидкой!</strong>
                            <p>Рекордные скидки!.</p>
                        </td>
                    </tr>
                    <tr>
                        <td align="center" style="border: 10px double gainsboro; padding: 20px; background-color: white;">
                            <a href="https://farengeit-online.ru/catalog/kotelnoe-oborudovanie/" target="_blank">
                            <img src="source/salesbanner.jpg" style="width: 100%; height: auto;" alt="Скидка на товар 1"/></a>
                            <strong style="display: block; margin-top: 10px;">Товар со скидкой!</strong>
                            <p>Невероятная распродажа!</p>
                        </td>
                        <td align="center" style="border: 10px double gainsboro; padding: 20px; background-color: white;">
                            <a href="https://farengeit-online.ru/catalog/kotelnoe-oborudovanie/" target="_blank">
                            <img src="source/mario2.jpg" style="width: 100%; height: 300px;" alt="Скидка на товар 1"/></a>
                            <strong style="display: block; margin-top: 10px;">Товар со скидкой!</strong>
                            <p>Марио рекомендует!!</p>
                        </td>
                    </tr>
                </table>
            </td>
    <!--Ьаннер правый -->
            <td width="12%" valign="top" align="center" class="ads-container">
                <strong>ПОИСК</strong>
                <br><input type="text" id="searchInput"style="margin-bottom: 5px;" value="" onkeyup=""><br>
                <input type="button" onclick="searchText()" style="font-weight: bold;" value="поиск"><br><br>
                <div class="ads-container">
                    <a href="https://www.premium-plumbing.co.uk/toilets/" target="_blank">
                        <img src="source/premiumPlumbing.jpg"
                             alt="Пример сайта"
                             class="ad-image">
                    </a>
                    <a href="https://www.americanplumbingflorida.com" target="_blank">
                        <img src="source/american plumbing.jpg"
                             alt="Пример сайта"
                             class="ad-image">
                    </a>
                    <a href="https://ukbathroomstore.co.uk/?srsltid=AfmBOor4c0OGMmLlAZLYVcwGSjImeYjqfPFB8TqIF5rymqOQNr2b2hWF" target="_blank">
                        <img src="source/spidertoilet.jpg"
                             alt="Пример сайта"
                             class="ad-image">
                    </a>
                </div>
            </td>
        </tr>
    </table>
</div>


<div class="footer">
    <p>© 2024 Магазин сантехники Фаренгейт. Все права защищены.</p>
</div>


<!-- JavaScript для поиска -->
<script>


function searchText() {
    // Получаем введенный текст
    let input = document.getElementById('searchInput').value.toLowerCase();
    let mainContent = document.getElementById('mainContent');

    // Убираем предыдущую подсветку
    let cleanedContent = mainContent.innerHTML.replace(/<mark>(.*?)<\/mark>/g, '$1');

    // Если поле ввода пустое, восстанавливаем текст без подсветки
    if (input.length === 0) {
        mainContent.innerHTML = cleanedContent;
        return; // Завершаем функцию
    }

    // Создаем регулярное выражение для поиска введенного текста
    let regex = new RegExp(`(${input})`, 'gi'); // 'g' - глобальный поиск, 'i' - не учитываем регистр

    // Подсвечиваем введенный текст
    let highlightedContent = cleanedContent.replace(regex, '<mark>$1</mark>');
    
    // Обновляем содержимое
    mainContent.innerHTML = highlightedContent;
}


function loginUser() {
    // Получаем значения полей логина и пароля
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value.trim();

    // Проверка на пустые поля
    if (!email || !password) {
        alert("Пожалуйста, заполните оба поля.");
        return;
    }

    // Создаем тело запроса
    const loginData = {
        email: email,
        password: password
    };

    // Отправка POST-запроса на API
    fetch('http://localhost:5000/api/v1/User/login', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(loginData)
    })
    .then(response => {
        if (response.status === 200) {
            // Если ответ успешен (код 200), получаем токен
            return response.text();  // Читаем тело ответа как текст (токен)
        } else if (response.status === 500) {
            // Если сервер возвращает статус 500, выводим сообщение об ошибке
            alert("Ошибка: Неверные данные для входа.");
            return Promise.reject("Unauthorized");
        } else {
            // В случае других статусов — выводим сообщение об ошибке
            return response.text().then(error => {
                alert("Ошибка входа: " + error);
                return Promise.reject(error);
            });
        }
    })
    .then(token => {
        if (token) {
            // Если токен получен, сохраняем его в localStorage
            localStorage.setItem('token', token);  // Сохраняем токен
            alert("Вход выполнен успешно!");
        }
    })
    .catch(error => {
        console.error('Ошибка:', error);
    });
}

</script>
</body>
</html>
